<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
      tr {
        height: 10px;
      }
      .tdr{
        font-size: 8px;
      }
    </style>
    <title>Document</title>
  </head>
  <body>
    <div class="container-fluid">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#" style="background-color: darkgray;-moz-border-radius: 20px;-moz-border-radius: 20px;border-radius: 20px;border-radius: 20px;">ALL REQUESTS</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html">HOME</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="./request-recived/request-recived.html">REQUEST RECIVED</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="./cfc-collected/cfc-collected.html">CFC COLLECTED</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="./cfc-collected-person/cfc-collected-person.html">CFC DESPATCH</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="./signed/signed-request.html">SIGNED CFC</a>
            </li>
          </ul>
        </div>
      </nav>
      <div class="row">
        <div class="col" id="my"></div>
        <div class="col">
          <div class="title"> Call Details Request Form </div>
          <div class="form-group">
            <label>Req No</label>
            <input type="text" id="reqno" name="reqno" class="form-control" autocomplete="off" disabled>
          </div>
          <div class="form-group">
            <label>CFC NO</label>
            <input type="text" id="cfcno" name="cfcno" class="form-control" autocomplete="off" required="required">
          </div>
          <div class="form-group">
            <label>Requested office</label>
            <input type="text" id="reqoffice" name="cfcno" class="form-control" autocomplete="off" required="required">
            <select class="form-control" aria-label="Default select example" id="reqoffice1" name="reqoffice1">
              <option selected>Open this select menu</option>
              <option value='2'>Deputy Commr of Police</option>
              <option value='3'>DCP Admnistration CPO</option>
              <option value='4'>Cyber Crime PS</option>
              <option value='5'>Kadavanthara PS</option>
              <option value='6'>AC Narcotic Cell</option>
              <option value='7'>Mattancherry PS</option>
              <option value='8'>AC Thrikkakara</option>
              <option value='9'>Traffic East PS</option>
              <option value='10'>Kalamassery PS</option>
              <option value='11'>Infopark PS</option>
              <option value='12'>Thrikkakara PS</option>
              <option value='13'>ACP Ernakulam</option>
              <option value='14'>AC Crime Dett.</option>
              <option value='15'>Kannamali PS</option>
              <option value='16'>Ernakulam Town South PS</option>
              <option value='17'>Cyber Cell</option>
              <option value='18'>Ernakulam North (Kasaba) PS</option>
              <option value='19'>Fort Kochi PS</option>
              <option value='20'>Vanitha Cell</option>
              <option value='21'>Panangad PS</option>
              <option value='22'>ACP Ernakulam Central</option>
              <option value='23'>Palarivattom PS</option>
              <option value='24'>Harbour PS</option>
              <option value='25'>AC Traffic West</option>
              <option value='26'>Maradu PS</option>
              <option value='27'>Ernakulam Central PS</option>
              <option value='28'>CPO Kochi City</option>
              <option value='29'>Eloor PS</option>
              <option value='30'>Palluruthy PS</option>
              <option value='31'>SHO Traffic West</option>
              <option value='32'>Cyber Dom Kochi</option>
              <option value='33'>Elamakkara PS</option>
              <option value='34'>AC Special Branch</option>
              <option value='35'>Cheranalloor PS</option>
              <option value='36'>AC Control Room</option>
              <option value='37'>Thoppumpady PS</option>
              <option value='38'>IP Traffic West</option>
              <option value='39'>Hill palace PS</option>
              <option value='40'>Vanitha PS</option>
              <option value='41'>Addl Commissioner of Police</option>
              <option value='42'>CI Control Room</option>
              <option value='43'>Kochi Metro PS</option>
              <option value='44'>AC Traffic East</option>
              <option value='45'>Ambalamedu PS</option>
              <option value='46'>Mulavukad PS</option>
              <option value='47'>AC DCRB</option>
              <option value='48'>AC Mattancherry</option>
              <option value='49'>Fort Kochi Coastal PS</option>
              <option value='50'>SHO Traffic East</option>
              <option value='51'>Udayamperoor PS</option>
            </select>
          </div>
          <div class="form-group">
            <label>Police station</label>
            <input type="text" id="ps" name="ps" class="form-control" autocomplete="off" required="required">
          </div>
          <div class="form-group">
            <label>Crime number</label>
            <input type="text" id="cno" name="cno" class="form-control" autocomplete="off" required="required">
          </div>
          <div class="form-group">
            <label>Sections</label>
            <input type="text" id="sections" name="section" class="form-control" autocomplete="off" required="required">
          </div>
          <div class="form-group">
            <input type="submit" name="submit" value="submit" id="btnSubmit" class="btn btn-primary" disabled>
          </div>
        </div>
      </div>
    </div>
    <div id="page-content"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
  function myFunction() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}
    $(document).ready(function() {
    	$('#reqoffice1').hide();
    	selectNumbers(1);
    	$(document).on('click', '.bttapr', function() {
    		var currentRow = $(this).closest("tr");
    		var reqNo = currentRow.find("td:eq(0)").text();
    		var cfcNo = currentRow.find("td:eq(1)").text();
    		var reqOffice = currentRow.find("td:eq(5)").text();
    		var pS = currentRow.find("td:eq(4)").text();
    		var cNo = currentRow.find("td:eq(2)").text();
    		var Sections = currentRow.find("td:eq(3)").text();
    		$("#reqno").val(reqNo);
    		$("#cfcno").val(cfcNo);
    		$('#reqoffice').val(reqOffice);
    		$("#ps").val(pS);
    		$('#cno').val(cNo);
    		$('#sections').val(Sections);
    		$('#btnSubmit').attr("disabled", false);
    	});
    	$(document).on('click', '#reqoffice', function() {
    		$('#reqoffice1').show();
    		$('#reqoffice').hide();
    	});
    	$(document).on('click', '.bttadd', function() {
    		var currentRow = $(this).closest("tr");
    		var col2 = currentRow.find("td:eq(0)").text();
    		console.log(col2);
    		var uri = 'http://192.168.1.14:8080/newcirtificate/insert-mobile.html?reqNo=' + col2;
    		location = uri;
    	});
    	$(document).on('click', '#btnSubmit', function() {
    		var reqno = $("#reqno").val();
    		var cfcno = $("#cfcno").val();
    		var reqoffice = $('#reqoffice1').val();
    		var ps = $("#ps").val();
    		var cno = $('#cno').val();
    		var sections = $('#sections').val();
    		updateDetails(reqno, cfcno, reqoffice, ps, cno, sections);
    	});

    	function selectNumbers(abc) {
    		$.ajax({
    			type: "POST",
    			url: 'select-request.php',
    			data: {
    				number: abc,
    			},
    			success: function(response) {
    				$("#my").html(response);
    			}
    		});
    	}

    	function updateDetails(reqno, cfcno, reqoffice, ps, cno, sections) {
    		$.ajax({
    			type: "POST",
    			url: 'update-request.php',
    			data: {
    				reqNo: reqno,
    				cfcNo: cfcno,
    				reqOffice: reqoffice,
    				pS: ps,
    				cNo: cno,
    				sectionS: sections,
    			},
    			success: function(response) {
    				$("#my").html(response);
    			}
    		});
    	}
    });
    
</script>
</body>
</html>